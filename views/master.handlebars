<script type="text/javascript">
    Reveal.initialize({history: false, showNotes: true});

    var socket = io.connect("http://"+location.hostname+":3030");
    socket.on("message", function(data){
        console.log(data);
    });

    notifyServer = function(event){
      data = {
        indexv : Reveal.getIndices().v,
        indexh : Reveal.getIndices().h,
        indexf : Reveal.getIndices().f || 0
      }
        socket.emit("slidechanged" , data);
        console.log(data);
    }

    Reveal.addEventListener("slidechanged", notifyServer);

    Reveal.addEventListener("fragmentshown", notifyServer);

    Reveal.addEventListener("fragmenthidden", notifyServer);

    var applauseOpacity = 0;
    var applauseFilter = document.getElementById("applauseFilter");

    showApplause = function() {    
        applauseOpacity = applauseOpacity + 0.05;
        applauseFilter.style.opacity = applauseOpacity;
    }

    hideApplause = function() {    
        applauseOpacity = applauseOpacity - 0.05;
        applauseFilter.style.opacity = applauseOpacity;
    }

    socket.on("applause", function (){
        showApplause()
        setTimeout(hideApplause, 2000);
        console.log(applauseOpacity);
    });

    var booOpacity = 0;
    var booFilter = document.getElementById("booFilter");

    showBoo = function() {    
        booOpacity = booOpacity + 0.05;
        booFilter.style.opacity = booOpacity;
    }

    hideBoo = function() {    
        booOpacity = booOpacity - 0.05;
        booFilter.style.opacity = booOpacity;
    }

    socket.on("boo", function (){
        showBoo()
        setTimeout(hideBoo, 2000);
    });

</script>
